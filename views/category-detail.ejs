<%- include('./partials/header') %>
<h2>
  <%= locals.delete ? `${title}: ${category.name}` : title %>
</h2>
<p><%= decode(category.description) %></p>

<div class="flex flex-col gap-2">
  <h3 class="text-lg font-bold">Items</h3>
  <% if (categoryItems.length) { for (const item of categoryItems) { %>
  <div>
    <h4 class="font-bold">
      <a href="<%= item.url %>" class="text-blue-500 hover:text-blue-600">
        <%= decode(item.name) %>
      </a>
    </h4>
    <p>Price: <%= formatPrice(item.price) %></p>
    <p>In stock: <%= item.quantity %></p>
  </div>
  <% } } else { %>
  <p>This category has no items.</p>
  <% } %>

  <!-- prettier-ignore -->
  <% if (locals.delete) { %>
    <%- categoryItems.length
      // ensure category has no items before deleting
      ? include('./partials/delete-first')
      : include('./partials/delete-form', { type: 'category', id: category._id}) %>
  <% } else { %>
  <span class="flex gap-2">
    <!-- prettier-ignore -->
    <%- include('./partials/delete-button', { type: 'category', id: category._id }) %>
    <%- include('./partials/update-button', { type: 'category', id: category._id }) %>
  </span>
  <% } %>
</div>

<%- include('./partials/footer') %>
